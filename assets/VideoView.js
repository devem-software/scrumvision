import{e as R,f as S,g as L,h as C,c as d,a as r,t as E,F as N,r as x,i as k,n as _,o as u,u as G,j as U,w as M,k as H,d as y,l as w,m as j,p as z,b,V as B,q as K,s as q,v as J,x as Q}from"./index.js";import{_ as W}from"./0plugin-vue_export-helper.js";const X={class:"timelapse"},Z={class:"timelapse__label"},ee={style:{"font-family":"inherit"}},te=["data-label","data-time","onClick"],ae=["onClick"],O={__name:"component",props:{color:{type:String,default:"green"},label:{type:String,default:""},duration:{type:Number,default:0},times:{type:Array,default:new Array},time:{type:Number,default:0},interval:{type:Number,default:0},timer:{type:Boolean,default:!1}},setup(n){const a=R(),V=async s=>{a.current=await s.time},t={white:"#f2f2f2",pink:"#f368e0",orange:"#ff9f43",red:"#ee5253",blue:"#0abde3",green:"#10ac84",indigo:"#2e86de",purple:"#341f97"},l=n,v=S(l.color);L(()=>{if(l.color=="random"){const s=Math.floor(Math.random()*t.length)+1;v.value=t[s]}else v.value=t[l.color]});const P=C(()=>l.times.map(s=>({time:s,percentage:s/l.duration*100}))),T=C(()=>{let s=[],m=0;if(!l.duration||l.duration<=0)return s;for(;m<=l.duration;){const c=new Date(m*1e3).toISOString().slice(11,19),p=Number((m/l.duration*100).toFixed(2));s.push({time:c,currentTime:m,timePercentage:p}),m=m+parseFloat(l.interval)}return s}),$=C(()=>!l.duration||l.duration<=0?0:Number((a.current/l.duration*100).toFixed(2)));return(s,m)=>(u(),d("div",X,[r("div",Z,[r("pre",ee,E(n.label),1)]),r("div",{class:"timelapse__times",style:_({border:`1px solid ${v.value}`})},[n.times.length>0?(u(!0),d(N,{key:0},x(P.value,(c,p)=>(u(),d("span",{class:"timelapse__times_time",key:p,style:_({left:c.percentage+"%",background:v.value}),"data-label":c.time,"data-time":n.duration,onClick:g=>V(c)},null,12,te))),128)):k("",!0),n.duration>0&&n.timer==!0&&n.interval>0?(u(),d("span",{key:1,class:"timelapse__times_cursor",style:_({left:$.value+"%",background:v.value})},null,4)):k("",!0),n.duration>0&&n.timer==!0&&n.interval>0?(u(!0),d(N,{key:2},x(T.value,(c,p)=>(u(),d("span",{class:"timelapse__times_time clean",key:p,style:_({left:c.timePercentage+"%",background:v.value}),onClick:g=>V(c)},E(c.currentTime),13,ae))),128)):k("",!0),n.duration>0&&n.timer==!0&&n.interval>0?(u(),d("span",{key:3,class:"timelapse__times_time clean",style:_({left:"100%",background:v.value})},E(n.duration),5)):k("",!0)],4)]))}},oe={key:0,class:"view__player"},re={class:"view__player_video"},ne={class:"view__player_video--controls",style:{color:"red",background:"teal","z-index":"1"}},le={class:"view__player_video--controls-control current"},se={class:"view__timers"},ie={key:1,class:"view__player_message"},ue={class:"view__player_message--icon"},de={key:0,class:"view__player_message--offline"},ce={__name:"VideoView",setup(n){const a=S(null),V=S(["red","blue"]),t=R(),l=G(),v=U(),P=S(v.getInfo),T=t.game.duration;t.getGame;const $=C(()=>t.getTeams),s=["try","conversion","penal","drop"],m=o=>{const e=Math.floor(o/3600),i=Math.floor(o%3600/60),f=Math.round(o%60),h=e.toString().padStart(2,"0"),D=i.toString().padStart(2,"0"),F=f.toString().padStart(2,"0");return`${h}:${D}:${F}`},c=(o,e)=>{let i=P.value[o];return Object.keys(i)[e]||null},p=()=>{document.hidden?a.value?.pauseVideo():a.value?.playVideo()},g=(o,e=0)=>{o&&(a.value=new YT.Player("player",{videoId:o,playerVars:{autoplay:0,controls:0,modestbranding:0,showinfo:1,loop:0,start:t.current??0},events:{onReady:i=>{t.current&&i.target.seekTo(t.current),t.isPlaying&&(clearInterval(A),i.target.playVideo()),setInterval(A,1e3),t.setPlayer(a.value)},onStateChange:i=>{t.isPlaying=i.data===YT.PlayerState.PLAYING},onError:i=>{console.error("Error en el reproductor:",i.data)}}}),t.setPlayer(a))},A=()=>{a.value&&(t.current=a.value.getCurrentTime()||0)};M(()=>t.game.videoId,o=>{a.value&&typeof a.value.loadVideoById=="function"?a.value.loadVideoById({videoId:o}):g(o)}),M(()=>t.current,o=>{a.value,a.value.seekTo(o)}),L(async()=>{if(document.addEventListener("visibilitychange",p),window.YT)window.YT.ready(()=>{t.game?.videoId&&g(t.game.videoId,t.current)});else{const o=await document.createElement("script");await o.setAttribute("src","https://www.youtube.com/iframe_api"),await document.head.appendChild(o),o.onload=()=>{window.YT.ready(()=>{t.game?.videoId&&g(t.game.videoId,t.current)})}}}),H(()=>{document.removeEventListener("visibilitychange",p),a.value&&(a.value.destroy(),a.value=null)});const I=S(B),Y=()=>{a.value.getPlayerState()==1?(a.value.pauseVideo(),I.value=B):(a.value.playVideo(),I.value=K),console.log(I)};return(o,e)=>y(t).videoId?(u(),d("div",oe,[r("div",re,[e[5]||(e[5]=r("div",{id:"player",style:{position:"absolute","min-width":"40rem"}},null,-1)),r("div",ne,[r("div",le,E(m(y(t).current)),1),w(y(q),{class:"view__player_video--controls-control previous"}),(u(),j(z(I.value),{onClick:e[0]||(e[0]=i=>Y()),class:"view__player_video--controls-control play"})),w(y(J),{class:"view__player_video--controls-control next"}),e[1]||(e[1]=r("div",{class:"view__player_video--controls-control divider"},null,-1)),e[2]||(e[2]=r("div",{class:"view__player_video--controls-control x20"},null,-1)),e[3]||(e[3]=r("div",{class:"view__player_video--controls-control x10"},null,-1)),e[4]||(e[4]=r("div",{class:"view__player_video--controls-control x05"},null,-1))])]),w(O,{color:"orange",duration:y(T),label:"TIME (SEC)",timer:"",interval:300},null,8,["duration"]),r("div",se,[(u(),d(N,null,x([0,1],(i,f)=>r("div",{class:"view__timers_team",key:i},[(u(),d(N,null,x(s,(h,D)=>w(O,{color:V.value[f],key:D,label:`${c("teams",$.value[f])}   -   ${h}`,duration:y(T),times:y(t).getGame.events[f].score[h]},null,8,["color","label","duration","times"])),64))])),64))])])):(u(),d("h1",ie,[e[7]||(e[7]=b(" CLICK EN")),r("span",ue,[w(y(Q))]),e[8]||(e[8]=b(" DE UN JUEGO ")),e[9]||(e[9]=r("br",null,null,-1)),e[10]||(e[10]=b("PARA PODER CONTINUAR ")),y(l).InternetStatus==!1?(u(),d("div",de,e[6]||(e[6]=[r("hr",null,null,-1),b(" SIN INTERNET,"),r("br",null,null,-1),b("ACCEDE A LOS REPORTES "),r("hr",null,null,-1)]))):k("",!0)]))}},ye=W(ce,[["__scopeId","data-v-28d43aa8"]]);export{ye as default};
